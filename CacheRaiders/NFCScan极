import SwiftUI
import CoreNFC

// MARK: - NFC Scan Only View
/// View for scanning existing NFC tokens and registering them as finds
/// This is different from OpenGameNFCScannerView which creates NEW objects
/// This view ONLY scans existing tokens and marks them as found
struct NFCScanOnlyView: View {
    @Environment(\.dismiss) var dismiss
    @ObservedObject var locationManager: LootBoxLocationManager
    @ObservedObject var userLocationManager: UserLocationManager
    private let nfcService = NFCService.shared

    @State private var isScanning = false
    @State private var scanResult: NFCService.NFCResult?
    @State private var errorMessage: String?
    @State private var currentStep: ScanningStep = .ready
    @State private var foundObject: LootBoxLocation?

    enum ScanningStep {
        case ready          // Ready to scan
        case scanning       // NFC scanning in progress
        case processing     // Processing scanned NFC data
        case success        // Object found successfully
        case notFound       // NFC tag scanned butÊûÅ


